<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defacing the Constitution</title>
    <script src="1-NExtLevel/Project2/libraries/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f8f1e5;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        let scribbles = [];
        let constitution;
        let frameCounter = 0;
        
        function preload() {
            constitution = loadImage('1-NExtLevel/NLPhotos/Constitution.jpeg');
        }
        
        function setup() {
            createCanvas(800, 600);
            imageMode(CENTER);
			background(255, 0, 0); // Test with a red background
        }
        
        function draw() {
			console.log("Drawing frame: ", frameCount);
            background(248, 241, 229);
            if (constitution) {
        		image(constitution, width / 2, height / 2, width * 0.8, height * 0.9);
   			} else {
        		console.log("Image not loaded yet");
    		}
            
            if (frameCounter % 30 === 0) {
                scribbles.push(new Scribble(random(width * 0.2, width * 0.8), random(height * 0.1, height * 0.9)));
            }
            
            for (let scribble of scribbles) {
                scribble.update();
                scribble.show();
            }
            frameCounter++;
        }
        
        class Scribble {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.paths = [];
                this.createScribble();
            }
            
            createScribble() {
                let numLines = int(random(3, 10));
                for (let i = 0; i < numLines; i++) {
                    this.paths.push({
                        x1: this.x + random(-20, 20),
                        y1: this.y + random(-20, 20),
                        x2: this.x + random(-20, 20),
                        y2: this.y + random(-20, 20)
                    });
                }
                if (random() < 0.2) {
                    this.writeDonald();
                }
            }
            
            writeDonald() {
                this.text = "Donald";
                this.textX = this.x + random(-10, 10);
                this.textY = this.y + random(-10, 10);
            }
            
            update() {
                for (let path of this.paths) {
                    path.x1 += random(-1, 1);
                    path.y1 += random(-1, 1);
                    path.x2 += random(-1, 1);
                    path.y2 += random(-1, 1);
                }
            }
            
            show() {
                stroke(0);
                strokeWeight(3);
                for (let path of this.paths) {
                    line(path.x1, path.y1, path.x2, path.y2);
                }
                
                if (this.text) {
                    noStroke();
                    fill(0);
                    textSize(24);
                    textFont('Cursive');
                    text(this.text, this.textX, this.textY);
                }
            }
        }
    </script>
</body>
</html>
